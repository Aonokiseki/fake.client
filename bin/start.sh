home=`pwd`
lib="$home/lib"

#check process.pid
if test -e fakeClient.pid; then
    PID=$(cat fakeClient.pid)
    if kill -0 $PID; then
        echo Process running with PID=$PID
        exit 1
    else
        echo Invalid pid file. Possible process was killed.
        rm -f fakeClient.pid
    fi
fi

#start jvm
nohup java \
-Xms1g \
-Xmx1g \
-classpath "\
$lib/accessors-smart-1.2.jar:\
$lib/analyzer-1.0.jar:\
$lib/animal-sniffer-annotations-1.17.jar:\
$lib/asm-5.0.4.jar:\
$lib/aspectjweaver-1.8.4.jar:\
$lib/attoparser-2.0.5.RELEASE.jar:\
$lib/audience-annotations-0.5.0.jar:\
$lib/avro-1.7.7.jar:\
$lib/byte-buddy-1.10.11.jar:\
$lib/checker-qual-2.5.2.jar:\
$lib/classgraph-4.8.83.jar:\
$lib/classmate-1.5.1.jar:\
$lib/commons-beanutils-1.9.3.jar:\
$lib/commons-cli-1.2.jar:\
$lib/commons-codec-1.11.jar:\
$lib/commons-collections-3.2.2.jar:\
$lib/commons-collections4-4.3.jar:\
$lib/commons-compress-1.18.jar:\
$lib/commons-configuration2-2.1.1.jar:\
$lib/commons-daemon-1.0.13.jar:\
$lib/commons-io-2.5.jar:\
$lib/commons-lang3-3.7.jar:\
$lib/commons-logging-1.1.3.jar:\
$lib/commons-math3-3.1.1.jar:\
$lib/commons-net-3.6.jar:\
$lib/commons-pool2-2.10.0.jar:\
$lib/commons-text-1.4.jar:\
$lib/curator-client-2.13.0.jar:\
$lib/curator-framework-2.13.0.jar:\
$lib/curator-recipes-2.13.0.jar:\
$lib/curvesapi-1.06.jar:\
$lib/dnsjava-2.1.7.jar:\
$lib/error_prone_annotations-2.2.0.jar:\
$lib/failureaccess-1.0.jar:\
$lib/gson-2.8.6.jar:\
$lib/guava-27.0-jre.jar:\
$lib/hadoop-annotations-3.2.1.jar:\
$lib/hadoop-auth-3.2.1.jar:\
$lib/hadoop-client-3.2.1.jar:\
$lib/hadoop-common-3.2.1.jar:\
$lib/hadoop-hdfs-3.2.1.jar:\
$lib/hadoop-hdfs-client-3.2.1.jar:\
$lib/hadoop-mapreduce-client-common-3.2.1.jar:\
$lib/hadoop-mapreduce-client-core-3.2.1.jar:\
$lib/hadoop-mapreduce-client-jobclient-3.2.1.jar:\
$lib/hadoop-yarn-api-3.2.1.jar:\
$lib/hadoop-yarn-client-3.2.1.jar:\
$lib/hadoop-yarn-common-3.2.1.jar:\
$lib/HikariCP-3.4.5.jar:\
$lib/htrace-core4-4.1.0-incubating.jar:\
$lib/httpclient-4.5.6.jar:\
$lib/httpcore-4.4.10.jar:\
$lib/IKAnalyzer2012_u6.jar:\
$lib/itextpdf-5.5.13.jar:\
$lib/j2objc-annotations-1.1.jar:\
$lib/jackson-annotations-2.9.8.jar:\
$lib/jackson-core-2.11.4.jar:\
$lib/jackson-core-asl-1.9.2.jar:\
$lib/jackson-databind-2.11.4.jar:\
$lib/jackson-datatype-jdk8-2.11.4.jar:\
$lib/jackson-datatype-jsr310-2.11.4.jar:\
$lib/jackson-jaxrs-1.9.2.jar:\
$lib/jackson-jaxrs-base-2.9.8.jar:\
$lib/jackson-jaxrs-json-provider-2.9.8.jar:\
$lib/jackson-mapper-asl-1.9.2.jar:\
$lib/jackson-module-jaxb-annotations-2.9.8.jar:\
$lib/jackson-module-parameter-names-2.11.4.jar:\
$lib/jackson-xc-1.9.2.jar:\
$lib/jakarta.annotation-api-1.3.5.jar:\
$lib/jakarta.el-3.0.3.jar:\
$lib/javax.servlet-api-3.1.0.jar:\
$lib/jaxb-api-2.2.11.jar:\
$lib/jaxb-impl-2.2.3-1.jar:\
$lib/jcip-annotations-1.0-1.jar:\
$lib/jcseg-core-2.6.2.jar:\
$lib/jdk.tools-1.8.jar:\
$lib/jedis-3.7.0.jar:\
$lib/jersey-client-1.19.jar:\
$lib/jersey-core-1.19.jar:\
$lib/jersey-json-1.19.jar:\
$lib/jersey-server-1.19.jar:\
$lib/jersey-servlet-1.19.jar:\
$lib/jettison-1.1.jar:\
$lib/jetty-security-9.3.24.v20180605.jar:\
$lib/jetty-servlet-9.3.24.v20180605.jar:\
$lib/jetty-util-9.3.24.v20180605.jar:\
$lib/jetty-util-ajax-9.3.24.v20180605.jar:\
$lib/jetty-webapp-9.3.24.v20180605.jar:\
$lib/jetty-xml-9.3.24.v20180605.jar:\
$lib/jieba-analysis-1.0.2.jar:\
$lib/jline-0.9.94.jar:\
$lib/jsch-0.1.54.jar:\
$lib/json-smart-2.3.jar:\
$lib/jsp-api-2.1.jar:\
$lib/jsr305-3.0.0.jar:\
$lib/jsr311-api-1.1.1.jar:\
$lib/jul-to-slf4j-1.7.30.jar:\
$lib/junit-3.8.1.jar:\
$lib/kerb-admin-1.0.1.jar:\
$lib/kerb-client-1.0.1.jar:\
$lib/kerb-common-1.0.1.jar:\
$lib/kerb-core-1.0.1.jar:\
$lib/kerb-crypto-1.0.1.jar:\
$lib/kerb-identity-1.0.1.jar:\
$lib/kerb-server-1.0.1.jar:\
$lib/kerb-simplekdc-1.0.1.jar:\
$lib/kerb-util-1.0.1.jar:\
$lib/kerby-asn1-1.0.1.jar:\
$lib/kerby-config-1.0.1.jar:\
$lib/kerby-pkix-1.0.1.jar:\
$lib/kerby-util-1.0.1.jar:\
$lib/kerby-xdr-1.0.1.jar:\
$lib/kingbase8-8.0.jar:\
$lib/leveldbjni-all-1.8.jar:\
$lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:\
$lib/log4j-1.2.17.jar:\
$lib/log4j-api-2.13.3.jar:\
$lib/log4j-to-slf4j-2.13.3.jar:\
$lib/logback-classic-1.2.3.jar:\
$lib/logback-core-1.2.3.jar:\
$lib/mapstruct-1.3.1.Final.jar:\
$lib/mongo-java-driver-3.11.1.jar:\
$lib/mysql-connector-java-8.0.27.jar:\
$lib/netty-3.10.5.Final.jar:\
$lib/netty-all-4.0.52.Final.jar:\
$lib/nimbus-jose-jwt-4.41.1.jar:\
$lib/okhttp-2.7.5.jar:\
$lib/okio-1.6.0.jar:\
$lib/paranamer-2.3.jar:\
$lib/poi-4.1.0.jar:\
$lib/poi-ooxml-4.1.0.jar:\
$lib/poi-ooxml-schemas-4.1.0.jar:\
$lib/poi-scratchpad-4.1.0.jar:\
$lib/protobuf-java-3.11.4.jar:\
$lib/re2j-1.1.jar:\
$lib/slf4j-api-1.7.25.jar:\
$lib/slf4j-log4j12-1.7.25.jar:\
$lib/snakeyaml-1.27.jar:\
$lib/snappy-java-1.0.5.jar:\
$lib/spring-aop-5.3.4.jar:\
$lib/spring-beans-5.3.4.jar:\
$lib/spring-boot-2.4.3.jar:\
$lib/spring-boot-autoconfigure-2.4.3.jar:\
$lib/spring-boot-starter-2.4.3.jar:\
$lib/spring-boot-starter-jdbc-2.4.3.jar:\
$lib/spring-boot-starter-json-2.4.3.jar:\
$lib/spring-boot-starter-logging-2.4.3.jar:\
$lib/spring-boot-starter-thymeleaf-2.4.3.jar:\
$lib/spring-boot-starter-tomcat-2.4.3.jar:\
$lib/spring-boot-starter-web-2.4.3.jar:\
$lib/spring-cloud-context-3.1.1.jar:\
$lib/spring-context-5.3.4.jar:\
$lib/spring-core-5.3.4.jar:\
$lib/spring-expression-5.3.4.jar:\
$lib/spring-jcl-5.3.4.jar:\
$lib/spring-jdbc-5.3.4.jar:\
$lib/spring-plugin-core-2.0.0.RELEASE.jar:\
$lib/spring-plugin-metadata-2.0.0.RELEASE.jar:\
$lib/spring-security-crypto-5.6.1.jar:\
$lib/spring-tx-5.3.4.jar:\
$lib/spring-web-5.3.4.jar:\
$lib/spring-webmvc-5.3.4.jar:\
$lib/springfox-bean-validators-3.0.0.jar:\
$lib/springfox-boot-starter-3.0.0.jar:\
$lib/springfox-core-3.0.0.jar:\
$lib/springfox-data-rest-3.0.0.jar:\
$lib/springfox-oas-3.0.0.jar:\
$lib/springfox-schema-3.0.0.jar:\
$lib/springfox-spi-3.0.0.jar:\
$lib/springfox-spring-web-3.0.0.jar:\
$lib/springfox-spring-webflux-3.0.0.jar:\
$lib/springfox-spring-webmvc-3.0.0.jar:\
$lib/springfox-swagger-common-3.0.0.jar:\
$lib/springfox-swagger-ui-3.0.0.jar:\
$lib/springfox-swagger2-3.0.0.jar:\
$lib/stax2-api-3.1.4.jar:\
$lib/swagger-annotations-1.5.20.jar:\
$lib/swagger-annotations-2.1.2.jar:\
$lib/swagger-models-1.5.20.jar:\
$lib/swagger-models-2.1.2.jar:\
$lib/thymeleaf-3.0.12.RELEASE.jar:\
$lib/thymeleaf-extras-java8time-3.0.4.RELEASE.jar:\
$lib/thymeleaf-spring5-3.0.12.RELEASE.jar:\
$lib/token-provider-1.0.1.jar:\
$lib/tomcat-embed-core-9.0.43.jar:\
$lib/tomcat-embed-websocket-9.0.43.jar:\
$lib/unbescape-1.1.6.RELEASE.jar:\
$lib/woodstox-core-5.0.3.jar:\
$lib/xmlbeans-3.1.0.jar:\
$lib/zookeeper-3.4.13.jar:\
$home/fake.client.jar" \
fake.client.Application --spring.config.location=file:./application.yml >/dev/null 2>&1 &
echo $! > ${home}/fakeClient.pid

